currentUser=null,function(e){function t(){r(o),e("body").addClass("authenticated")}function a(e){UserApp.User.get({user_id:"self"},function(t,a){t?e&&e(null):e&&e(a[0])})}function r(t){e.get("/favorites?token="+c,function(e){e&&(d=e,t(e))},"json")}function o(t){_.each(t,function(t){t="#"+t;var a=e(t),r=a.clone(!0);a.remove(),r.addClass("favorite"),e("#example tbody").prepend(r)})}function n(){e(".library-column").on("mouseenter",function(t){var a=e(t.currentTarget);u.show(),u.appendTo(a)}).on("mouseleave",function(t){e(t.currentTarget)})}function s(t,a){if(t&&a.query===e("#search-box").val()){for(var r="",o=0;o<a.hits.length;++o){var s=a.hits[o],i="";s.github&&(i='<ul class="list-inline"><li><i class="fa fa-github"></i> <a href="https://github.com/'+s.github.user+"/"+s.github.repo+'">'+s.github.user+"/"+s.github.repo+'</a></li><li><i class="fa fa-star"></i> '+s.github.stargazers_count+'</li><li><i class="fa fa-code-fork"></i> '+s.github.forks+"</li></ul>");var l='<tr id="'+s.objectID+'"><td><p><a itemprop="name" href="libraries/'+s.name+'">'+s._highlightResult.name.value+'</a></p><p class="text-muted">'+(s._highlightResult.description&&s._highlightResult.description.value)+'</p><ul class="list-inline">'+e.map(s._highlightResult.keywords||[],function(e){var t="none"!==e.matchLevel?"highlight":"";return'<li class="label label-default '+t+'">'+e.value+"</li>"}).join(" ")+"</ul>"+i+'</td><td style="white-space: nowrap;"><div style="position: relative; padding: 8px;" data-lib-name="'+s.name+'" class="library-column '+s.fileType+'-type"><p itemprop="downloadUrl" class="library-url" style="padding: 0; margin: 0">//cdnjs.cloudflare.com/ajax/libs/'+s.originalName+"/"+s.version+"/"+s.filename+"</p></div></td></tr>";r+=l}b.html(r),n()}}function i(t){location.hash="";var a=e(t.currentTarget).val();""===a?b.html(v):f!==a&&m.search(a,s,{hitsPerPage:20}),f=a}function l(e){document.getElementById("loader").style.display=e?"block":"none"}UserApp.initialize({appId:"5343d12871774"});var c=Kaka.get("ua_session_token");c?(UserApp.setToken(c),a(function(a){a?(console.log(a),currentUser=a,t(),e(".profile").attr("href","/profile/"+a.login),e(".profile, .logout").show(),e(".status-container").fadeIn(200)):(e(".login, .register").show(),e(".login-or-register").show(200))})):(e(".login, .register").show(),e(".login-or-register").show(200)),e("body").on("click",".logout",function(){return Kaka.remove("ua_session_token"),UserApp.User.logout(function(){window.location.href="/"}),!1});var d=[];e("body").on("click",".add-favorite",function(t){if(!currentUser)return window.location="/register",!1;toastr.success("Added a new favorite");var a=e(t.currentTarget).parents("tr")[0].id;d.push(a),ga("send","event","favorite","added",a,4),e.ajax({url:"/favorites?token="+c,success:function(){console.log(arguments)},type:"POST",data:{library:a}});var r=e("#"+a);return console.log(r),r.hasClass("favorite")?(e(r).appendTo("#example tbody"),r.removeClass("favorite")):(window.a=r,r.addClass("favorite"),e(r).prependTo("#example tbody")),!1}),e("body").on("click",".remove-favorite",function(t){toastr.error("Removed a favorite");var a=e(t.currentTarget).parents("tr")[0].id;ga("send","event","favorite","removed",a,4),d=_.without(d,a),e.ajax({url:"/favorites?token="+c,success:function(){console.log(arguments)},type:"DELETE",data:{library:a}});var r=e("#"+a);return console.log(r),r.hasClass("favorite")?(e(r).appendTo("#example tbody"),r.removeClass("favorite")):(window.a=r,r.addClass("favorite"),e(r).prependTo("#example tbody")),!1});var u=e("<div/>").addClass("btn-group copy-button-group"),p=e("<button/>").attr("data-copy-type","").attr("type","button").addClass("btn btn-primary btn-sm copy-button").text("Copy"),g=e("<button/>").attr("data-toggle","dropdown").attr("type","button").addClass("btn btn-primary btn-sm dropdown-toggle").append(e("<span/>").addClass("caret"));p.appendTo(u),g.appendTo(u),u.append('<ul class="dropdown-menu copy-options"><li><a data-copy-type="https:" class="copy-https-url copy-button" href="#">Copy Url</a></li><li class="js"><a data-copy-embed="script" data-copy-type="https:" class=" copy-https-script copy-button" href="#">Copy Script Tag</a></li><li class="css"><a data-copy-embed="link" data-copy-type="https:" class=" copy-https-link copy-button" href="#">Copy Link Tag</a></li><li class="divider"></li><li><a class="add-favorite" href="#">Add to favorites</a></li><li><a class="remove-favorite" href="#">Remove from favorites</a></li></ul>');e("<div/>");u.attr("style","display: none;"),u.appendTo("body");var h=new ZeroClipboard(e(".copy-button"));h.on("ready",function(){n(),h.on("copy",function(t){var a=e(t.target),r=a.attr("data-copy-embed"),o=e(".library-url",a.parents(".library-column")).text();"script"===r?o='<script type="text/javascript" src="'+o+'"></script>':"link"===r&&(o='<link rel="stylesheet" href="'+o+'">'),ga("send","event","library","copied",a.parents(".library-column").attr("data-lib-name"),4),toastr.warning("Copied to the clipboard");var n=t.clipboardData;n.setData("text/plain",o)})}),rowSelector="#example > tbody > tr",matchedRowSelector="#example tr.search-result",libraryNameCache=_.pluck(e(rowSelector),"id");var f,b=e(".packages-table-container tbody"),v=b.html(),y=new AlgoliaSearch("2QWLVLXZB6","2663c73014d2e4d6d1778cc8ad9fd010",{dsn:!0}),m=y.initIndex("libraries");if(e("#search-box").on("keyup change",i),location.hash.length>1){var w=location.hash.match(/q=([\w+]+)/);w&&(w=w[1].replace(/\+/," "),e("#search-box").val(w),m.search(w,s,{hitsPerPage:20}))}e("#search-box").focus(),e(".version-selector").on("change",function(t){var a=e(t.currentTarget).val();e("[data-library-version]").removeClass("active"),e('[data-library-version="'+a+'"]').addClass("active")}),e(".status-update").on("keydown",function(t){var a=200-1*e(t.currentTarget).val().length;e(".character-count").text(a),0>a?e(".status-update-button").attr("disabled","disabled"):e(".status-update-button").removeAttr("disabled")}),e(".post-news").on("submit",function(t){return console.log("update"),e("textarea",t.currentTarget).attr("disabled","disabled"),e('[type="submit"]',t.currentTarget).attr("disabled","disabled"),e.ajax({url:"/status?token="+c,success:function(e){e.error?toastr.error(e.error):window.location="/news"},type:"POST",data:{status:e("textarea",t.currentTarget).val()}}),!1}),e(".login-form").on("submit",function(){function e(){Kaka.set("ua_session_token",UserApp.global.token),window.location.href="/",l(!1)}return Kaka.remove("ua_session_token"),l(!0),UserApp.User.login({login:document.getElementById("username").value,password:document.getElementById("password").value},function(t){t?(alert("Error: "+t.message),l(!1)):e()}),!1})}(jQuery);