<div class="container">

<div class="library-container">
  <div class="col-md-12">
      <div class="row">
        <div class="col-md-8">

    <h1 style="margin-top: 00px;">{{library.name}}</h1>
    <p><a href="{{library.homepage}}">{{library.homepage}}</a>
      <span id="library-name" style="display: none;" hidden>{{library.name}}</span>
      <p>{{library.description}}</p>
      <em>{{library.keywords}}</em>

      <br />
      {{#library.gratipay}}
      <a href="https://gratipay.com/{{library.gratipay}}/"><img src="https://img.shields.io/gratipay/{{library.gratipay}}.svg" /></a>
      {{/library.gratipay}}
        </div>
        <div class="col-md-4">

      <script async type="text/javascript" src="https://cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=cdnjscom" id="_carbonads_js" async></script>
        </div>
      </div>
       <div class="input-group version-dropdown">
      <div class="input-group-addon">Version</div>
      <select class="form-control version-selector" style="float: right;">
        {{#assets}}
          <option value="{{version}}" {{selected}}>{{version}}</option>
        {{/assets}}
      </select>
        </div>
      <div style="clear: both;"></div>
      <br />
      {{#selectedAssets}}
      <div data-library-version="{{version}}" class="assets">
          <table style="margin-top: 10px;" cellpadding="0" cellspacing="0" border="0" class="table table-striped" id="example">
            <tbody>
              {{#files}}
              <tr class="library">
                <td class="library-column"  data-lib-name="{{library.name}}" style="position: relative;">
                  <p class='library-url'>https://cdnjs.cloudflare.com/ajax/libs/{{library.originalName}}/{{version}}/{{name}}</p>
                </td>
              </tr>
              {{/files}}
            </tbody>
          </table>
        </div>
      {{/selectedAssets}}

    <br />
    <br />
</div>
</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js"></script>
<script>
files = [];
{{#selectedAssets}}
base='https://cdnjs.cloudflare.com/ajax/libs/{{library.originalName}}/{{version}}/'
{{#files}}files.push('{{name}}');{{/files}}
var zip = new JSZip();
var num = -1;
function x() {
  (function lib() {
    $.get(base+files[num], function(responseText) {
      if ( responseText != undefined ) {
        zip.file(files[num], responseText, {base64: true});
      }
    }).fail(function() {
      console.log("Error on downloading " + files[num]);
    });
    if (num++ < files.length - 1) {
      setTimeout(add, 500);
    } else {
      content = zip.generate({type:"blob"});
      saveAs(content, "{{library.originalName}}.zip");
      {{/selectedAssets}}
    }
  })();
}

</script>
